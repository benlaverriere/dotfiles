#!/bin/zsh

# the upper echelon
alias g="git"
alias ll="ls -oAhG"
alias w="watson"
alias y="n yarn"

alias cat="bat"
alias be="bundle exec"
alias mark="open -a Markoff $@"
alias now='date +"%A %d %B %H:%M"'
alias ql='qlmanage -p $@ &> /dev/null'
alias scripts="sed -E '1d;\$d;s/[^\"]*\"([^\"][^\"]*)\",?.*/\1/' <(cat package.json | jq '.scripts | keys')"
alias sup='echo $(now) "$(weather)" $(battery)'
alias todo="git diff --name-only origin/master | xargs ag TODO"
alias weather='curl -s "wttr.in?format=%c%20%20%t%20%m"'

# TODO extract functions to their own file
medit() {
  touch $1
  open -a Markoff $1
  vim $1
}

switch_java() {
  export JAVA_HOME=`/usr/libexec/java_home -v $1`
  java -version
}

# prefer Homebrewed vim over Apple default
# (at the moment, mostly for `conceal` features)
alias vi=$(brew --prefix)/bin/vim
alias vim=$(brew --prefix)/bin/vim

# we want this to expand now, not on execution
# shellcheck disable=2139
alias fastlane_="$(command -v fastlane)"
# wrap with notee to get a notification on completion
alias fastlane='n bundle exec fastlane'

alias watson-daily-report='watson report -d --csv | perl -pe "s/(.+59,[^,]+?,)(.*?),(\d+.*)/\3,\1\"\2\"/" | sort -n -r'

alias booted-simulator-name="xcrun simctl list devices booted -j | jq -j '.devices[] | select(length > 0) | map_values(.name)[0]'"
